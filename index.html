<!DOCTYPE html>
<html>
<head>
    <title>Canvas App</title>
</head>
<body>
    <div>
        <label>Concept: <input type="text" id="concept" value="apple"></label>
    </div>
    <div>
        <button id="reset">Reset</button>
        <button id="repeat">Repeat</button>
        <button id="continue">Continue</button>
    </div>
    <canvas id="canvas" width="500" height="500" style="border: 1px solid black;"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const conceptInput = document.getElementById('concept');
        
        // Drawing state
        let isDrawing = false;
        let currentStroke = [];
        let allStrokes = [];
        
        // Set up canvas for smooth drawing
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.lineWidth = 2;
        ctx.strokeStyle = '#000';
        
        // Get mouse position relative to canvas
        function getMousePos(e) {
            const rect = canvas.getBoundingClientRect();
            return {
                x: e.clientX - rect.left,
                y: e.clientY - rect.top
            };
        }
        
        // Mouse events
        canvas.addEventListener('mousedown', function(e) {
            isDrawing = true;
            const pos = getMousePos(e);
            currentStroke = [pos];
            
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        });
        
        canvas.addEventListener('mousemove', function(e) {
            if (!isDrawing) return;
            
            const pos = getMousePos(e);
            currentStroke.push(pos);
            
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
        });
        
        canvas.addEventListener('mouseup', function() {
            if (isDrawing) {
                isDrawing = false;
                allStrokes.push([...currentStroke]);
                console.log('Stroke completed:', currentStroke.length, 'points');
                console.log('Total strokes:', allStrokes.length);
            }
        });
        
        canvas.addEventListener('mouseout', function() {
            if (isDrawing) {
                isDrawing = false;
                allStrokes.push([...currentStroke]);
            }
        });
        
        // Button handlers
        document.getElementById('reset').onclick = function() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            allStrokes = [];
            currentStroke = [];
            console.log('Reset - all strokes cleared');
        };
        
        document.getElementById('repeat').onclick = function() {
            console.log('Repeat clicked, concept:', conceptInput.value);
            console.log('All strokes data:', allStrokes);
        };
        
        document.getElementById('continue').onclick = function() {
            console.log('Continue clicked, concept:', conceptInput.value);
            console.log('Current drawing has', allStrokes.length, 'strokes');
        };
    </script>
</body>
</html>